# 프로그램이 실행되었지만, 뭐가 뭔지 하나도 모르겠다.

## 2.4 프로그래머는 코루틴을 어떻게 이해해야 할까?
- 코루틴은 높은 성능, 동시성 요구 분야에 자주 등장한다

### 2.4.1 일반 함수
- return 또는 마지막 코드까지 순차적으로 실행돼야 반환 가능

### 2.4.2 일반 함수에서 코루틴으로
- 코루틴에는 스레드와 유사한 기능이 있다.
    - 일시 중지 (yield)
    - 재개
- 코루틴은 자신의 실행 상태를 저장할 수 있다.
    - 반환 후 계속 호출 가능
    - 마지막 일시 중지 지점에서 재개 가능!
- 코루틴은 함수 실행 정보를 저장하고 반환한다. -> 일시 중지 지점에서 재개 할 때 해당 정보 필요

### 2.4.3 직관적인 코루틴 설명
- 일반적인 함수 호출  funcA() { funbB() }
    - A함수가 실행되다가 B함수를 만나면 제어권은 funcB로 넘어간다.
- 코루틴은 연결 시작점으로 돌아가는 것을 반복해서 함수가 실행된다.

### 2.4.4 함수는 그저 코루틴의 특별한 에에 불과하다.
- 코루틴은 마지막에 실행된 위치를 알 수 있다.
    - 일시 중지시 실행 중 상태 저장, 저장 상태에서 재개
    - 운영 체제가 스레드 스케줄링하는 것과 똑같다.
- 컴퓨터 시스템은 주기적으로 타이머 인터럽트 생성 -> 인터럽트 처리마다 OS는 현재 스레드 일시 중지 여부 결정 기회를 갖는다.

### 2.4.6 코루틴은 어떻게 구현될까?
- 코루틴과 스레드의 구현은 본질적으로 차이가 없다.
    - 일시 중지, 재개가 가능
        - 일시 중지 시 상태 정보를 반드시 기록해야 한다.
        - 상태 정보를 기반으로 재개
- 상태 정보
    - CPU 레지스터 정보
    - 함수 실행 시 상태 정보
- funcA() { funcB() { funcC() { } } }
    - 프로세스에 스레드 1개, 스택 영역에 스택 프레임 네 개 존재
    - 스택 영역은 스레드를 위한 공간
    - 코루틴 스택 프레임 정보는 어디에 저장?
        - 힙 영역에 저장 -> 코루틴 A 스택 영역, 코루틴 B 스택 영역, ...
- 스택 영역은 일반 함수 스택 프레임 보관