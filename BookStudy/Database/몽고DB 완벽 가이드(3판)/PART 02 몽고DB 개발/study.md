# 스터디 진행 (24.04.14, ~ 06 특수 인덱스와 컬렉션 유형)
- 사용하지 않는 인덱스 주기적 관리?
    - 따로 관리가 되진 않는다.
        - 시스템 뷰로 사용하지 않는 인덱스를 볼 순 있으나, 추가된 이후로 명확하게 사용되지 않는다를 알 수 없다.
        - 인덱스가 많은 경우 옵티마이저가 선택지가 많아져 부하를 유발 할 순 있는데 그 땐 관리를 들어간다.
        - 고유 인덱스, 일반 인덱스가 OLTP 환경에서 사실상 인덱스가 많아지는 경우는 별로 없어서 정리 작업이 많이 생기진 않는다.
        - 인덱스를 visible, invisible로 관리 할 수도 있다.
- MySQL 서버는 쿼리 플랜 캐시는 없는 것 같다.
- MySQL 서버도 커맨드?제한, 허용된 네트워크 패킷이 64MB 제한이 있긴 하다. -> IN 개수 제한이라기 보단 패킷 제한에 걸린다고 볼 수 있다.
    - 커맨드 명령 자체 수행 불가
- https://tatiyants.com/pev/#/plans/new
    - postgresql -> 쿼리플랜 적으면 json으로
- 동등 조건, 정렬 조건, 범위 조건 순으로 복합 인덱스를 구성한다.
- 비용 기반, 로직? 기반 쿼리 플랜 -> 과거에는 where 절 인덱스 순서가 중요했지만, 현재는 비용 기반이라 where 절 인덱스 순서는 상관 없다 다만 클릭 쿼리로 인덱스 순으로 작성하는 게 좋다.
- 중복된 조건이 2개 들어가면, dbms는 옵티마이저 최적화 단계 (3개정도)가 있는데, 최적화 판단 하는 것이 있고, 중복된 조건일지언정 앞에서 제거
    - go, 파이썬 orm 코드들은 말이 안되는 불필요한 쿼리를 작성하는 경우가 있을 수 있다.
    - JPA ORM으로 이슈가 있었던 적은 없다.
- MYSQL 세컨더리 인덱스가 마지막에 PK를 둔다.
    - 정의 하지 않아도, 마지막에 붙는다.
    - Postgrsql은 PK를 붙이지 않는다.
    - 몽고DB도 마찬가지 -> 세컨더리 인덱스 구성한대로 조회를 해야 커버드 쿼리가 된다.
- is null, is not null도 인덱싱 스캔이 가능하다. (인덱스 생성시)
- 소트 머지 조건 -> or 조건 사용시 mysql도 하나의 쿼리 인덱스를 생성하는 것 보다 두 개의 인덱스를 생성하여 merge 하기도 한다.
- 공간 인덱스, 좌표나 지표 사용시 몽고 DB 사용하면 이점을 얻을 수 있다.