# 서론
트랜잭션은 DB의 논리적 처리 그룹이다.  

# 8.1 트랜잭션 소개
트랜잭션은 부분적으로 완료되지 않는다.  
몽고 DB는 4.2 버전 이상이어야 트랜잭션 사용이 가능하다.  

## 8.1.1 ACID의 정의
- 원자성 (Atomicity)
  - 모두 반영이 되거나, 되지 않거나 즉 모두 커밋되거나 롤백된다.
- 일관성 (Consistency)
  - 트랜잭션 성공은 일관성 있는 상태를 유지 된다.
- 고립성 (Isolation)
  - 여러 트랜잭션에 동시에 실행되도록 허용한다. -> 동일한 결과 보장 
  - 부분적인 결과를 보지 않도록 보장한다.
- 영속성 (Durability)
  - 모든 데이터는 유지된다.

## 8.2 트랜잭션 사용법
- 몽고 DB에서 트랜잭션 사용을 위한 두 가지 API가 있다.
  1. 코어 API
     - RDBMS와 유사한 구문 (트랜잭션 시작, 커밋 등)
     - 대부분 오류의 재시도 로직 X, 개발자가 직접 제어 필요
  2. 콜백 API
     - 트랜잭션 사용에 권장되는 접근 방식 (복잡하고 추가 코드 작성이 필요해질수록 더 권장)
     - 재시도 로직 O
     - 코어 API에 비해 많은 기능 래핑

## 8.3 애플리케이션을 위한 트랜잭션 제한 조정
- 트랜잭션 사용시 알아야할 매개변수가 있다.

### 8.3.1 타이밍과 Oplog 크기 제한
- 몽고 DB 트랜잭션 두 가지 주요 제한 범주
  1. 트랜잭션 시간 제한 (실행, 대기, ...)
  2. 크기 제한
- 크기 제한
  - 최대 실행 시간 1분 이하
- Oplog 크기 제한
  - 몽고 DB는 트랜잭션 쓰기 작업의 필요한 만큼 oplog 항목 생성
    - oplog 항목은 16메가바이트 이하여야 한다.
- 트랜잭션은 앱에서 드물게 사용하는 것이 좋은 강력한 기능이다.