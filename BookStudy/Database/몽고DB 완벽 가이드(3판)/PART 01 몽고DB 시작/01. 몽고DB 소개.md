몽고DB는 강력하고 유연하며 확장성 높은 범용 DB다.  
- 보조(secondary index) 인덱스
- 범위 쿼리
- 정렬
- 집계
- 공간 정보 인덱스
등 이 외 확장 기능과 결합했다.  
그렇다면 몽고 DB를 만든 주요 디자인 결정이 무엇인지 알아보자.  

# 1.1 손쉬운 사용
몽고DB는 도큐먼트 지향DB다.  
관계형 모델을 사용하지 않음으로써 분산 확장을 쉽게 할 수 있고, 다른 여러 이점들도 있다.  
데이터를 행 개념 대신 도큐먼트를 사용해 더 유연하다.  
관계형 모델이 아닐 뿐, 관계를 아예 표현하는 것은 아니다.  
내장 도큐먼트 배열을 허용하여 복잡한 관계를 도큐먼트에 표현할 수 있다.  
이 방식은 객체지향 언어를 접한 개발자들에게 매우 적합하다.  
  
몽고DB는 도큐먼트의 key, value를 미리 정의하지 않는다. 따로 고정된 스키마가 존재하지 않는다.  
따라서 필요시마다 쉽게 필드 추가, 제거를 할 수 있다.  
여러 테스트 케이스를 시도 후 최선의 모델을 선택하기에도 적합하다.  

# 1.2 확장 가능한 설계
앱의 데이터셋 크기는 놀라운 속도로 증가하고 있다.  
가용 대역폭과 값싼 스토리지의 증가했다.  
즉, 데이터베이스를 사용하면 저장 용량이 감당하지 못하는 경우가 생길 수도 있다.  
개발자는 데이터베이스의 확장을 고려해야 하고, 스케일업 또는 스케일다운 할 지에 대한 결정도 필요하다.  
분산 확장시 몽고DB의 이점을 살릴 수 있고, 경제적이고 확장이 용이한 방식이다. 다만 복잡해진다.  
  
몽고DB는 분산 확장을 염두에 두고 설계됐다.  
도큐먼트 지향 데이터 모델은 데이터를 여러 서버에 더 쉽게 분산하게 해준다.  
도큐먼트의 자동 재분배, 요청에 대한 클러스터 내 데이터 양과 부하를 조절 할 수 있다.  
  
# 1.3 다양한 기능
몽고 DB는 범용 DB로 만들어졌다.  
따라서 CRUD 등 DBMS 대부분의 기능을 제공한다.  
- 제공 기능
  - 인덱싱
    - 세컨더리 인덱스 (보조 인덱스)
    - 고유 인덱스
    - 복합 인덱스
    - 공간 정보 인덱스
    - 전문 인덱스
  - 집계
    - 데이터 처리 파이프라인 개념으로 한 집계 프레임워크 제공
      - 집계 파이프라인: DB 최적화를 최대한 활용해 서버 측에서 비교적 간단한 일련의 단계로 데이터 처리
  - 특수한 컬렉션 유형
    - TTL(Time-to-Live) 유효 시간 컬렉션 지원
    - 기준 필터(?)와 일치하는 도큐먼트에 한정된 부분 인덱스 지원 -> 효율성, 저장공간의 이점을 얻는다.
- 파일 스토리지: 큰 파일과 메타데이터를 편리하게 저장하는 프로토콜 지원
  
3.2 버전 -> 매우 제한된 방식으로 조인을 지원하긴 한다.  
3.6 버전 -> 복잡한 조인 가능  
두 버전에서 제공하는 기능은 분산 시스템에서 효율적인 제공이 어렵다.  
몽고DB는 저런 것 보다, 더 큰확장성을 허용하기 위한 아키텍처적인 결정을 했다.  

# 1.4 고성능
몽고 DB의 주요 목표인 성능도 설계에 지대한 영향을 미쳤다.  
동시성, 처리량 극대화를 위해 와이어드타이거(WiredTiger), 스토리지 엔진에 '기회적 락(opportunistic locking)'을 사용했다.  
캐시와 같이 제한된 용량의 램으로 쿼리에 알맞은 인덱스를 자동 선택 가능하다.  
결론적으로, 모든 면에서 고성능을 유지하기 위해 설계된 DB다.  
  
강력한 성능과 더불어 RDBMS의 많은 기능을 포함한다.  
그러나 일부 기능은 처리와 로직을 클라이언트 측에 오프로드한다. (드라이버 또는 사용자 앱 코드로 처리)  
이러한 간소한 설계 덕분에 고성능을 발휘한다.  

# 1.5 몽고 DB의 철학
결국 몽고DB 프로젝트의 주 관심사는 높은 확장성, 유연성, 고성능 등 완전 기능을 갖춘 데이터 스토리지를 만드는 것이다.  






