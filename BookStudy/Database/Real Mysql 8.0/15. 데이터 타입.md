# 15. 데이터 타입
```text
칼럼의 데이터 타입과 길이를 정할 때 주의 사항
1. 저장되는 값의 성격에 맞는 최적 타입
2. 가변 길이 칼럼은 최적 길이 지정
3. 조인 조건 사용 칼럼은 똑같은 데이터 타입 선정

무분별하게 칼럼의 길이나 타입을 지정하면 디스크 공간과 CPU 자원도 함께 낭비된다. 
그로 인해 SQL 성능이 저하되는 것은 당연한 결과다.

서비스 도중 스키마 변경은 서비스 중지나 읽기 전용 모드로 전환 작업이 필요 할 수 있다. 
따라서 특히 칼럼의 변경은 신중하게 선택하자.
너무 넉넉해도, 부족해도 문제가 된다.
칼럼의 타입과 길이는 저장되는 값의 성격을 정확히 분석하고 최적의 타입을 선정하는 것이 중요하다.
```

## 15.1 문자열 (CHAR와 VARCHAR)
```text
CHAR와 VARCHAR는 무슨 차이가 있을까? 모든 DBMS에서 두 타입을 사용하는 것을 보면,
각 타입의 장단점이 명확할 것으로 보인다.
저장 공간과 비교 방식의 관점에서 비교해보고, 내부적으로 어떤 차이가 있는지 살펴봅쒸다.
```

### 15.1.1 저장 공간
```text
공통점은 문자열을 저장할 수 있는 데이터 타입이다.
가장 큰 차이점은 고정 길이(CHAR), 가변 길이(VARCHAR)다.

고정 길이 
- 실제 입력되는 칼럼 값의 길이에 따라 저장 공간의 크기가 변하지 않는다. 
- CHAR 타입의 경우 저장 공간의 크기는 고정이다. 따라서 추가적인 공간이 필요하지 않다.

가변 길이
- 최대 길이의 제한은 있으나, 최대 이하 크기의 값이 저장될 때 그만큼 저장 공간이 줄어든다.
- 저장된 값의 유효 크기가 얼마인지 별도 저장해 둬야 한다. -> 1 ~ 2 바이트의 추가 저장 공간 필요
    - 문자열 길이 관리를 위한 1 ~ 2 바이트의 추가 공간이 필요하다. 
    - 문자열이 255 바이트 이하면 1바이트, 초과하는 경우 2바이트의 추가 공간이 더 필요하다.
    
MySQL에서 TEXT, BLOB 타입을 제외한 칼럼의 전체 크기가 64KB 초과할 수 없다.
테이블에 VARCHAR 타입 하나가 있다면 64KB 크기의 데이트 저장 가능하다. 초과시 에러가 발생하거나 초과되는 타입이 VARCHAR 타입이라면 TEXT 타입으로 대체된다.
그래서 VARCHAR 타입 추가시 TEXT 타입으로 대체되는지 확인이 필요하다.
Q) 어떻게 확인? 물리적으로 TEXT 타입으로 보여지나?

문자열 값 고정 -> CHAR, 가변 -> VARCHAR가 일반적이다.
VARCHAR를 사용해도 기껏해야 1 ~ 2 바이트의 추가 공간이 필요한데, 신중하게 타입을 정해야 하는 이유가 있을까?
그리고 실제 문자열의 값의 길이가 정적인지, 가변적인지만을 기준으로 타입을 결정하는 것은 올바르지 않다.
Q) CHAR, VARCHAR의 가장 큰 차이가 길이인데, 그럼 어떤 추가적인 기준으로 타입을 지정할까?

CHAR & VARCHAR 타입을 지정하는 판단 기준
1. 저장 문자열 길이가 대개 비슷한가?
2. 칼럼의 값이 자주 변경되는가?

```































