mysql에서 일반적인 구성인 master/slave 구성이 있다.
쓰고, 읽기 가능한 마스터와 읽기만 가능한 슬레이브가 존재한다.
마스터 (1)-(N) 슬레이브

슬레이브는 마스터의 데이터를 거의 실시간으로 복제해 동일하게 갖고 있다.
마스터에 장애가 발생하는 경우 슬레이브가 마스터가 되기도 한다.

백업을 마스터에서 하면 서버에 부하가 가기 떄문에, 슬레이브에서 백업을 하기도 한다. 
슬레이브에서도 읽기 뿐만 아니라 쓰기 작업을 일부 수행함으로써 부하를 줄일 수도 있다.

# Master-Slave Replication 구성하기
마스터 외에 두 개의 슬레이브를 컨테이너로 구축 후 구성, 
슬레이브는 호스트와 공유하도록 하고
마스터와 슬레이브간 복제 구성한다.

**Master-Slave Replication 구성**
- mkdir -p db/db002/data db/db003/data
- chmod 777 db/db002 db/db002/data
- chmod 777 db/db003 db/db003/data

로그 디렉토리와 config 파일을 위한 볼륨도 reference 할 수 있게 세팅
- mkdir -p db/db002/log db/db002/conf
- mkdir -p db/db003/log db/db003/conf
- chmod 777 db/db002/log db/db002/conf
- chmod 777 db/db003/log db/db003/conf

Slave conf 파일 세팅 (db/db002/conf/my.cnf, file permission 644)
- my.cnf -> mysql 설정 파일
- slave인 만큼, read_only 속성 추가

slave용 Container 생성 (db002, db003)
- 경로 /db
- docker run -i -t --name db002 -h db002 -p 3307:3306 \
    -v db002/data:/var/lib/mysql \
    -v db002/log:/var/log/mysql \
    -v db002/conf:/etc/percona-server.conf.d \
    -e MYSQL_ROOT_PASSWORD="root" -d percona:5.7.30

- docker run -i -t --name db003 -h db003 -p 3308:3306 \
  -v db003/data:/var/lib/mysql \
  -v db003/log:/var/log/mysql \
  -v db003/conf:/etc/percona-server.conf.d \
  -e MYSQL_ROOT_PASSWORD="root" -d percona:5.7.30

# Bridge Network을 이용한 Replication 구성