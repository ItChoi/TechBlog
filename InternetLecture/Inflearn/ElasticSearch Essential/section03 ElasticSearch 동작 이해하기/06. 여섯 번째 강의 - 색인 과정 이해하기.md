# 색인 과정 이해하기
- 엘리스틱 서치 부분 중 가장 중요한 내용 중 하나.

## 색인(indexing)이란?
- 문서를 분석하고 저장하는 과정

## 색인 과정
1. 인덱스가 있는가?
   - YES -> 2번 생략, 3번 이동
2. 인덱스 생성 
3. 매핑 정보가 있는가?
   - YES -> 4번 생략, 5번 이동
4. 매핑 정보 생성 (동적 매핑)
5. 매핑 정보가 올바른가?
   - YES -> 7번 이동 
6. 에러 (색인 불가)
7. inverted index 생성
   - 검색과 밀접한 관련이 있다.
8. 프라이머리 샤드에 저장
9. 레플리카 샤드에 복사
- 적절한 수의 샤드 개수 설정이 성능야 큰 영향을 미친다.
  - 적절한 샤드 개수는?
    - 공식 문서에 존재
    - 처음부터 완벽한 샤드 배치 계획을 세울 순 없다.