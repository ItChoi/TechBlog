# 클러스터와 노드 이해하기
- 클러스터 정의
  - 여러 대 컴퓨터들이 연결되어 하나의 시스템처럼 동작하는 컴퓨터들의 집합
- 엘라스턱서치 클러스터 정의
  - 여러 대의 노드들이 각자의 역할을 바탕으로 연결되어 하나의 시스템처럼 동작

## 노드의 종류
  - 마스터 노드: 클러스터 상태 관리 및 메타데이터 관리
  - 데이터 노드: 문서 색인 및 검색 요청 처리
  - 코디네이팅 노드: 검색 요청 처리
  - 인제스트 노드: 색인되는 문서의 데이터 전처리

## 마스터 노드와 마스터 후보 노드
- 마스터 노드
  - 마스터 노드 -> 클러스터의 마스터 노드 역할 담당
  - 마스터 후보 노드 -> 마스터 노드 문제 발생시 후보가 되는 노드, 마스터가 뻗으면 후보들 중 새로운 마스터

## 엘라스틱서치 클러스터의 특징
- 7대 노드가 존재한다고 가정
  - 마스터 노드#0 (마스터 후보)
  - 마스터 노드#1 (마스터 후보)
  - 마스터 노드#2 (실제 마스터)
  - 데이터 노드#0
  - 데이터 노드#1
  - 데이터 노드#2
  - 코디네이팅 노드#0
- 예시 1
  - 유저 요청 GET /books/_doc/1
    - 클러스터기 때문에 어떤 노드에 요청해도 상관 없다.
    - 마스터 노드#0가 요청을 받고, 1번 문서를 가지고 있는 데이터 노드#0에게 요청 전달 및 응답 
      - 마스터가 다시 유저에게 응답한다.
- 예시 2
  - 유저 요청 GET /books/_doc/1
    - 데이터 노드#0에 바로 요청, 바로 응답
- 역할에 맞는 노드에게 요청을 하게 하는 것도 중요하다.
- 데이터 노드 직접 접근을 가급적 차단, LB를 두어 통신하도록 설정 할 수 있다. (데이터 노드 확장 가능)