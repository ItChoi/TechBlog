# 리눅스 터미널
리눅스 쉘이란?
- 리눅스 시스템
  - 쉘
    - 커널
      - 하드웨어

쉘의 사전적 의미는 껍질...
우리의 시스템(하드웨어, 운영체제)를 가장 바깥에서 감싸고 있다.
사용자가 시스템 사용을 위해 쉘로 접근하여 시스템을 이용할 수 있다.

사용자는 리눅스 터미널을 이용해 접근한다.
프롬프트가 보이며 커서가 깜빡깜빡한다.

터미널을 띄우면 bash라는 터미널 쉘을 띄우게 된다.
중간 과정은 복잡하지만, 간단히 사용자는 리눅스 쉘을 이용해 리눅스 시스템을 다룬다.

쉘의 종류는 다양하다.

telnet 등을 사용으로 tcp/ip 네트웤을 통해 인터넷 구간을 지나 원격지에 있는 쉘을 띄울 수 있다.
telnet 보다 요새는 암호화가 되어 있는 SSH를 이용해 네트워크 접근을 한다.

도커, 클라우드 플랫폼을 사용하더라도 CLI는 중요하다.
기능을 다양하게 쓰기 위해서 CLI는 필수다 필수

# 리눅스 기본 쉘 명령어 강의 소개
- 기본 쉘 명령어 (간략)
  - 매뉴얼 조회: man
  - 파일 목록/내용 조회 관련 명령어: ls, cat, head, tail
  - 검색/탐색 관련 명령어: grep, find
  - 압축/해제 관련 명령어: tar, gzip/gunzip, zip/unzip
  - 시간 관련 명령어: date, cal
  - 기타 명령어: echo, exit, history
  - 관리자 권한 실행: sudo
  - 패키지 매니저: apt
  - 텍스트 에디터: nano

커맨드, 배쉬에서 정해져있는 명령어
bash 제공 기본 커맨드, 리눅스 설치시 기본 커맨드 등이 섞여 있다.
apt, nano는 커맨드라 하지 않고, 툴이라 부른다.
이런 것들이 리눅스에는 굉장히 많다.

툴들을 명령어로 하기 떄문에 커맨드라고 퉁 쳐서 말하는데, 이러한 기준들이 명확하지 않긴하다.
리눅스 기본 명령어는 꼭 bash에서 제공하는 명령어라기보단, 사용할 수 있는 명령어, 툴 등을 통합해서 배운다라고 이해하면 된다.

명시한 명령어들은 기본 명령어고, 더 많은 명령어들이 존재한다. 서서히 알아가도록....

# 터미널 사용 및 man
manual의 약자다.
다른 모르는 커맨드를 조회하는 백과사전 개념이다.

리눅스 명령어 공부시 man을 먼저 확인해보자.
대부분의 것들이 나와있다.

내용 검색시 슬래시 검색어 -> /recur, 다음 검색 찾을 때 / + 엔터

# 디렉터리 내용 조회/이동/확인
- cd: change directory

윈도우도 C 드라이브, D 드라이브가 있고 그 안에 트리 형태로 폴더, 파일 들이 있다.
리눅스도 조금은 다르지만 비슷하다.

리눅스도 파일이 트리처럼 구성 돼 있다.
디스크 드라이버가 여러 개 더라도, root에서 모든 파일들이 시작된다. (C, D 드라이버 개념이 없다.)
root 디렉토리는 / 달랑 하나인 곳이다.

쉘에 '~'는 사용자 홈 디렉토리라는 뜻으로 붙어있다.
- cd 하고 엔터치면 사용자 홈디렉토리로 간다.
- cd -: 직전 디렉토리로 간다.

디렉토리도 일종의 파일이다.

# 파일 내용 조회
- cat: 파일의 내용 처음부터 끝까지 다 보여준다.
- head: 시작부터 몇 줄 (몇 줄은 옵션 사용)
- tail: 끝에 몇 줄 (몇 줄은 옵션 사용)
- more: 처음부터 끝까지 조금씩 짤라서 보여주는
  - /검색어 해서 검색도 가능하다.
- less: 처음부터 끝까지 조금씩 짤라서 보여주는
  
- 텍스트 에디터 (편집 모드)
  - vi
  - vim

# 파일 내용 검색
- grep
  - 파일 안의 내용 중 원하는 내용을 검색해준다.
  - grep -i 'hello world' main.h main.c
    - main.h main.c 두 파일에서 'hello world' 내용을 찾아라.
    - ' 또는 "로 감싸줘야 하는데, 큰 따옴표로 감싸는게 안정적이다.
  - grep -i hello world main.h main.c
    - 따옴표로 안 감싸주면, hello 라는 검색으를 world, main.h, main.c 세 파일에서 검색된 내용을 보여준다.
    - 여러 파일에서 검색하기 떄문에 앞단에 파일명이 보인다.

파이프 개념을 알아야 쓸 수 있는 개념
- 화면에 뿌려질 내용을 grep을 통해 받아 볼 수 있다. -> 파이프라인(파이프)를 이용한다.
- ls -al | grep kern.log
  - |: 파이프 라인의 기호이다. (뒤에서 배운다.)
  - 파이프를 이용해 앞에 명령의 출력을 뒤에 커맨드 라인에 보내준다. 
    - 물이 지나가는 파이프처럼... 
  - ls -al | grep .log | tail -n 1
    - 파이프를 현란하게 다루게 되면, 해석이 힘들긴 하지만, 유용하게 쓸 수도 있다.

- grep "2021-03-25 22:15:49" dpkg.log
  - 효율면에선 이게 좋다.
- cat dpkg.log | grep "2021-03-25 22:15:49"
  - 덜 효율이라고 해도 컴퓨터가 빠르게 검색해주니 큰일나지도 않는다.

grep -> 많이 쓰이게 된다 테스트 많이 해보자.

# 파일 검색
파일의 여러 속성, 조건을 부여해 원하는 파일이 있는지, 어디에 있는지 찾아준다.

- find
  - 조건에 부합하는 파일을 찾는 명령어
  - 먼저 find --help 또는 man find로 설명을 봐라.
    - command --help
      - 나온 설명에서 대괄호로 감싼 부분은 생략 가능하단 것.
  - 매치되는 파일 삭제, 출력, 조회, 특정 명령 수행 등을 할 수 있다.
  - 잘 사용하면 파워풀하게 사용 가능하지만 주의도 해야한다 (삭제, ...)
    - 검색 표현식 잘 쓰기...
    
-name 옵션을 사용해 필터링 후 액션을 취한다. 기본 액션 -print -> 출력
패스로 지정한 디렉토리 이하를 모두 탐색한다.

- find /etc -name "conf" -print
  - 파일 이름이 conf인 것만 찾게된다.
- find /etc -name "*.conf" -print
  - .conf 파일들을 찾는다.
  - '*': 모든
- find . | grep "conf"
  - 위에 명령어와 차이는 있지만 결과는 같다. 전체 파일 중 찾는다. 메커니즘이 다르다.

# 압축 관련 커맨드
윈도우에서는 zip 등의 익숙한 압축 파일이 있고, 더블 클릭으로 압축이 풀리고 간단했다.

리눅스 터미널은 확장자가 생소하고 어떻게 풀어야 할 지 바로 인지 못할 수도 있다.

리눅스에서도 .zip은 많이 쓰인다.
그 외에 .gz, .tar, .tar.bz, tar.gz 등이 있다.

윈도우는 확장자가 zip으로 거의 통일되어 있는 반면 리눅스는 다르다.
리눅스 압축 확장자를 푸는 법을 알아보자.

단일 파일 압축: gzip으로 많이 사용된다. (.gz)
  - 여러 파일 압축도 가능하긴하다.

파이프라인 '|' 말고 '>' 를 사용하면 왼쪽 커맨드의 출력물을 파일로 저장을 하라는거다.
- find > filelist
  - find 해서 나오는 출력물들을 filelist 파일에 저장 하라는 명령어
  - '>' 리디렉션이라고 하는데, 이후에 알아본다. 간단하게 사용할 수도 있지만 복잡하게 사용 가능하다.

- gzip
  - gzip file
    - 파일은 삭제되고 확장자 .gz 압축 파일이 생긴다.
- file 명령어
  - file file.gz
    - 확장자, 어떤 파일이었는지 등 여러 정보를 알 수 있다.
- gunzip file.gz

윈도우는 파일마다 확장자가 있다. 확장자를 기반으로 동작한다. (.exe, .txt, ...)
확장자마다 유틸리티를 띠워 열게 한다.

리눅스는 확장자라는 개념이 없다.
확장자는 있을 수 있지만, 단순히 이름으로만 인식, 윈도우처럼 확장자마다 다르게 동작하거나 그러지 않는다.

리눅스에서는 파일을 압축하면 압축이 되고 파일과 색깔이 다르게 표시된다.
그러나 mv 등으로 압축 파일명을 변경하면, 색깔이 파일처럼 표시된다. (ls 명령이 단순 확장자만 보고 색깔 구분, 확장자마다 다르게 동작이 아니라 단순 표시만.)
그러나 압축된 사이즈 그대로 유지하게 된다. 
따라서 리눅스는 확장자를 따라서 가는 것이 아니다. 

리눅스에서는 .tar.gz 확장자를 많이 쓴다. (.tgz)
tar 툴이 사용된다. (압축이 아니라, 파일을 쭉 연결해주는 역할)
대상이 되는 여러 파일을 tar를 이용하여 파일들을 붙여 하나의 파일로 만들어준다.
압축이 되는 겅시 아니라 연결만 된다. (크기가 압축했다고 줄어들지 않는다.)
tar를 통해 하나로 연결된 파일들을 gzip으로 압축한다. (이때 용량이 줄어든다.)

tar로 묶고, gzip으로 압축하는 것이 효율적인 역사적인 이유가 있었을 것이다. (추측)
- tar --help로 정보 체크하기.
- tar -czf filetest.tar.gz filelist.gz .profile
  - filetest.tar.gz 라는 이름으로 파일이 연결되고 압축된 파일이다.
  - filelist.gz .profile 두 개의 파일이 연결되고 묶인다.
  - 옵션의 순서가 바뀌면 에러 날 수 있다.
- tar -zxf ../filetest.tar.gz

# 시간 및 기타 커맨드
- date 
  - 현재 시간 출력
  - 터미널 시간을 종종 사용 할 일이 있다.
    - SSH 등을 이용해 다른 서버에 접속해 터미널을 띄워서 시간 확인해보면, 내 피씨가 아닌 원격 호스트의 시간을 나타낸다.
- cal
  - 현재 월, 일
  - cal -d 1991-04
  - cal -A 2

히스토리 버퍼
- 내가 입력한 커맨드를 화살표 위 아래로 하면 표시되는 것이 히스토리 버퍼에 등록되어 있는 덕분이다.
- history
- !line 
  - !16
    - history에 저장된 라인의 명령어를 실행해준다.
- !!
  - 직전 커맨드

터미널 종료 명령어
- exit
  - 쉘이 끝나고 쉘을 열고 있던 터미널이 끝난다.
  - 엄밀히 말하면 쉘을 끝낸 것
  - 서브 쉘, 여러 쉘 등을 끝낼 때 exit 사용 하면 그 전 쉘로 사용가능

echo 명령어
- echo asdasdasdasd
  - 화면상 출력을 해준다.
- 아무 의미없는 텍스트도 출력해주는 경우도 있다. 배쉬에 변수 생성, 초기화 등을 이용할 수 있다.
  - bash가 프로그래밍 언어는 아니지만, 변수, 조건문 등 간단한 프로그래밍 사용 가능한데, echo가 중요한 역할을 해준다. -> 변수를 화면에 출력 가능

- evn
  - 환경 변수 리스트 확인 가능

ls라는 명령어도 어딘가에 저장되어 있기 떄문에 우리가 사용 가능하다.
ls도 하나의 툴이다. 어딘가에 있으니까 명령어가 실행되는데, 
이를 찾아주는 툴이 which 이다.
- which ls

# 관리자 권한 실행
- sudo 커맨드!

리눅스 계정, 보안을 먼저 이해해야 한다.
VM 설치시 하나의 계정을 생성한다. 계정 없이 진행되지 않는다.

계정과 패스워드를 입력한다.
리눅스에는 root라는 관리자 계정이 숨어있다.

root는 리눅스 시스템에 반드시 존재하는 계정이다.

평소에는 추가한 계정으로 홈 디렉토리도 생성되고 한다.
어디까지나 사용자 계정이다. root 관리자 계정과 권한이 다르다.

관리자 계정은 시스템의 모든 설정의 변경과 설치를 할 수 있다.
리눅스에 어떤 프로그램을 설치 할 때 기본적으로는 관리자 계정으로 설치해야 한다.

사용자가 설치해서 사용자만 설치할 수 있게 할 수 있지만, 사용자 계정을 다뤄야 깊은 이해를 할 수 있다.

내가 만든 계정과 별개로 관리자 계정이 숨어 있고, 관리자 계정으로만 가능한 권한들이 있다. (시스템 수정, ...)

사용자 계정으로 무언가를 할 때 권한에 막히게 되는데, 그때 필요한게 sudo 커맨드다.
sudo 의미는 (스위치 유저 두), 테스트 계정이지만 다른 계정으로 실행한 것 처럼 할 수 있다. 수두가 나온 배경

관리자 계정으로 무언가를 해야 할 때 사용하는 경우가 많다.

첫 생성 계정은 sudo를 사용 가능한 계정으로 설정되어 있다.

sudo 사용시 관리자 권한으로 명령어를 실행한다.
sudo 사용시 시간적 타임아웃이 있어서, 몇 분 동안은 명령어 실행시 암호를 묻지 않는다.

# 패키지 매니저 사용법(apt)
- 우분투에서 사용하는 패키지 매니저 apt

패키지 관리 시스템은 repo가 존재하고, pc 안에 패키지 매니저가 있는데,
사용자가 pc에서 패키지 매니저를 이용해 작업 명령을 내리면, 
패키지 매니저에 연결된 레포에 요청과 응답을 받아 사용자에게 보여지는 과정을 거친다.

우분투는 apt
센토스는 yum

패키지 매니저 툴은 여러 가지고, 커맨드와 옵션을 주는 방식은 다르다.
그러나 하는 일은 비슷하다.
레포에서 조회, 설치, 삭제 등등등

# 나노(nano) 편집기 사용법
텍스트 에디터다.

vim 보단 훨씬 직관적이고 간단하다.

강사도 nano는 쓰지 않고 vim을 사용한다.

vim을 학습하려면 러닝커브가 어느정도 있다.
익숙해지면 메모장 사용하는 방식보다 훨씬 편하고 좋다고 한다.
