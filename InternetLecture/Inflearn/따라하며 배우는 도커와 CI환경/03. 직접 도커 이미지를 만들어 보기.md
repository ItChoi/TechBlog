# 도커 이미지 생성하는 순서
1. Dockerfile 작성
   - 도커 이미지를 만들기 위한 설정 파일
   - 컨테이너 동작 설정 정의
2. 도커 클라이언트
   - Dockerfile -> 도커 클라이언트 전달
3. 도커 서버
   - 도커 클라이언트에 전달된 모든 작업 실행
4. 이미지 생성

# Dockerfile 만들기
- 도커 파일 만드는 순서
  - 도커 이미지가 필요한 것 무엇인지 체크
  1. 베이스 이미지 명시 (파일 스냅샷)
  2. 추가적으로 필요 파일 다운을 위한 명령어 명시 (파일 스냅샷)
  3. 컨테이너 시작시 실행 명령어 명시

- 베이스 이미지란?
  - 도커 이미지는 여러 개의 레이어로 되어 있는데, 베이스 이미지는 이미지의 기반이 된다.
  - OS (Window, MacOS, Linux 등등), 간단히 운영체제라고 생각하면 된다.

- 실제로 만들어보기
  - "hello world" 출력해보기

- 순서
1. 도커 파일을 놓을 폴더 만들기.
2. Dockerfile 생성
```dockerfile
# 베이스 이미지 명시
FROM baseImage

# 추가적으로 필요한 파일 다운
RUN command

# 컨테이너 시작시 실행할 명령어
CMD ["excutable"]
```

- FROM: 이미지 생성시 기반이 되는 이미지 레이어
  - <이미지 이름>:<태그> 형식 작성
    - 태그 생략시 가장 최신 버전 다운
    - ex) ubuntu:14.04
    - jdk 등을 설정해도 되는듯
  - alpine
    - 간단한 앱 출력시, 굳이 용량이 큰 OS 사용할 필요 없다. 
    - 가장 작은 사이즈
- RUN: 도커 이미지 생성 전 수행할 쉘 명령어
- CMD: 컨테이너 시작시 실행할 실행 파일 또는 쉘 스크립트
  - 해당 명령어는 Dockerfile 내 1회만 사용 가능

# 도커 파일로 도커 이미지 만들기
- Dockerfile -> 도커 클라이언트에 전달을 위해 빌드 필요
  - docker build ./
    - 더 권장된다.
  - docker build .

- 베이스 이미지에서 다른 종속성이나 새로운 커맨드 추가시 
1. 베이스 이미지를 임시 컨테이너를 생성해 시작시 명령어, 레이어 등을 파일 스냅샷 등을 넣어준다.
2. 임시 컨테이너 기반하여 새로운 이미지를 생성시킨다.
3. 임시 컨테이너 삭제
- 임시컨테이너와 새로운 이미지의 고유 값은 다르다.
- 즉, 이미지를 통해 컨테이너를 만들기도 하지만, 컨테이너를 통해서 이미지를 만들기도 한다.

# 내가 만든 이미지 기억하기 쉬운 이름 주기
- 도커 이미지 이름 
  - 기존: docker build ./
  - 이름: docker build -t itchoi0429/hello:latest ./
    - -t 내 도커 아이디 / 저장소/프로젝트 이름 : 버전
