# 섹션 4. [기초편] 기본 오브젝트

## Namespace, ResourceQuota, LimitRange
- 이 오브젝트들을 왜 써야할까?
  - k8s 클러스터 -> 전체 사용 가능 자원
    - 메모리
    - CPU
    - namespace
      - pod
        - 필요한 자원을 클러스터 자원을 공유해서 사용
  - 네임스페이스 안에 파드들이 클러스터 자원을 모두 사용하면 문제가 발생한다.
    - 해결을 위해 ResourceQuota, LimitRange 존재!
  - ResourceQuota
    - namespace 마다 최대 하드 자원 한계 설정 가능
    - namespace 뿐만 아니라 클러스터에도 적용 가능 -> 전체 자원 한계 설정
  - LimitRange
    - 네임스페이스에 들어오는 파드 크기 설정 가능
      - 크기가 설정 값 이하여야 해당 namespace 할당 가능
    - namespace 뿐만 아니라 클러스터에도 적용 가능 -> 전체 자원 한계 설정
    - 한 파드가 자원 사용량을 너무 높게 하면 다른 파드가 해당 네임스페이스에 할당되지 않는다.
- namespace
  - 같은 type 오브젝트 -> 이름 중복 불가
  - 다른 namespace 자원과 분리되어 관리된다.
    - Label을 통해 서비스와 파드 연결 -> 다른 네임스페이스에 있다면 불가능
    - 대부분 자원 모두 동일
      - Node, PV 등 제외
  - 네임스페이스 삭제 -> 안에 있는 자원 모두 함께 삭제된다.
  - 다른 네임스페이 파드간 연결 -> 기본적으로는 연결 가능 (네트워크 폴리시)
  - 파드, 서비스 yml -> 네임스페이스 지정 가능, 생략시 default 네임스페이스
- ResourceQuota
  - 자원 한계를 설정하는 오브젝트
  - 사용 메모리, 한계 메모리
  - ResourceQuota를 설정한다면 pod에 무조건 requests.memory, limits.memory 스펙을 명시해야 한다.
    - 명시하지 않는다면 해당 네임스페이스에 만들어지지 않는다.
- LimitRange
  - 자원 한계를 설정하는 오브젝트
  - 각 파드마다 namespace에 핟랑 가능한지 자원 체크
    - min.memory: 1Gi
      - 최소 1기가 이상
    - max.memory: 4Gi
      - 최대 4기가 초과 불가
    - maxLimitRequestRatio.memory: 3
      - request, limit 비율이 최대 3배를 넘으면 안 된다.
    - defaultRequest.memory: 1Gi
      - 파드 스펙 설정 없을 때 해당 값으로 할당
    - default.memory: 2Gi
      - 파드 스펙 설정 없을 때 해당 값으로 할당
- namespace -> ResourceQuota, LimitRange 적용 전 namespace에 파드가 존재하지 않도록 해야한다. 
- namespace 하나 -> 여러개 limitRange 존재 가능
  - 여러 개 지정시 -> 속성 값이 혼합되어 파드가 생성되지 않거나 비정상적으로 생성될 수 있다.